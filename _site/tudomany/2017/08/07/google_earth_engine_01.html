<!DOCTYPE html> <html lang="hu"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta http-equiv="X-UA-Compatible" content="ie=edge"> <title>A Google Earth Engine felhő alapú platform alkalmazása a geoinformatikában, 1. rész.</title> <meta name="description" content="Korunkban már nem az adatok hiánya jelenti a földrajzi kutatások korlátját, hanem annak a tömérdek rendelkezésre álló és ingyenes távérzékelt adatnak a rendk..."> <meta lang="hu-HU"> <meta property="og:title" content="A Google Earth Engine felhő alapú platform alkalmazása a geoinformatikában, 1. rész."> <meta property="og:url" content="http://localhost:4000/tudomany/2017/08/07/google_earth_engine_01.html"> <meta property="og:site_name" content="Gulácsi András"> <meta property="og:description" content="Korunkban már nem az adatok hiánya jelenti a földrajzi kutatások korlátját, hanem annak a tömérdek rendelkezésre álló és ingyenes távérzékelt adatnak a rendk..."> <meta property="og:image" content=""> <meta property="og:type" content="website"> <link rel="shortcut icon" type="image/png" href="/assets/basic/favicon.png"/> <link rel="canonical" href="http://localhost:4000/tudomany/2017/08/07/google_earth_engine_01.html"> <link rel="alternate" type="application/rss+xml" title="New Geographer" href="http://localhost:4000/feed.xml"> <!-- CSS style. New Geographer theme (NGv3).--> <link rel="stylesheet" type="text/css" href="/css/main.css"/> <!-- CSS style. Syntax highlight rules for code snippets.--> <link rel="stylesheet" type="text/css" href="/css/highlight.css"/> <!-- Important JavaScript code comes here --> <script type="text/javascript"> function copyLink() { var body_element = document.getElementsByTagName("body")[0]; var selection = window.getSelection(); var pagelink = "<br /><br />"+"<span style='font-size: 12px; color: red;'><br />FIGYELEM! A salsaboy990.github.io oldalain megjelenő írások szerzői jogvédelem alatt állnak! <br /> Cikkeim utánközlését nyomon követem az interneten!<br />Az írások a következő szabályok betartása mellett vehetőek át részben: <br /> Az ön által most másolt cikkből kisebb részt idézhet a forrás (a szerző és a weblap) megnevezésével, vagy maximum az első feléig átveheti a cikket, amely esetben az átvett bevezető után az alábbi linket kell elhelyeznie: </span><br /><br /><span style='font-size: 14px;'> A teljes cikk a salsaboy990.github.io - Új Geográfus oldalán olvasható: <br /><a href='"+document.location.href+"'>"+document.location.href+"</a></span>"; var copytext = selection + pagelink; var newdiv = document.createElement("div"); newdiv.style.position = "absolute"; newdiv.style.left = "-99999px"; body_element.appendChild(newdiv); newdiv.innerHTML = copytext; selection.selectAllChildren(newdiv); window.setTimeout( function() { body_element.removeChild(newdiv); }, 0 ); } </script> </head> <body oncopy="copyLink()" class="body-style"> <header id="head" class="site-header"> <div class="wrapper"> <a class="site-title" href="/">New Geographer</a> <br /> <nav class="site-nav"> <a href="#" class="menu-icon"> <svg viewBox="0 0 18 15"> <path fill="#181818" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/> <path fill="#181818" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/> <path fill="#181818" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/> </svg> </a> <div class="trigger"> <a class="page-link" href="/about/">Magamról</a> <a class="page-link" href="/book/">Könyv</a> <a class="page-link" href="/works/">Referenciák</a> <a class="page-link" href="/archive/">Archívum</a> </div> </nav> </header> <div class="stripe"> <div class="wrapper"> <span id="intro">[ Bemutatkozás ]</span> </div> </div> <section id="about-block"> <div class="wrapper"> <h2>Hogy mit akarok?</h2> <p>Gulácsi András vagyok. Geoinformatikusként a legújabb web-alapú megoldásokat alkalmazom a földrajzi kutatásban, a földrajzi adatok feldolgozására és megjelenítésére a JavaScript nyelv erejével. Az alacsony színvonalú, elavult egyetemi tömegoktatás nem képes megfelelni a jelen kihívásainak és nem aknázza ki a legújabb IT-technológiákban rejlő nagy lehetőségeket. Az Új Geográfus egy új szemléletet valósít meg, hogy a földrajz is beléphessen a XXI. századba!</p> <p>A tudásom 90%-át nem az egyetemen szereztem, programozni is magamtól tanultam meg. Az írásaimban és a készülő könyvemben az ideológiai alapú, utópisztikus gondolkodás ellen veszem fel a küzdelmet a tények, a tapasztalatok és a józan ész segítségével, hogy ne váljon a pusztító ideológiák martalékává a társadalom, szenvedést és nyomort hagyva maga után.</p> <span id="close" class="close">&times;</span> </div> </section> <div class="page-content"> <div class="wrapper"> <article class="post"> <header class="post-header"> <h1 class="post-title">A Google Earth Engine felhő alapú platform alkalmazása a geoinformatikában, 1. rész.</h1> <div class="post-meta"><em>2017-08-07</em></div> </header> <div class="post-content"> <p><strong>Korunkban már nem az adatok hiánya jelenti a földrajzi kutatások korlátját, hanem annak a tömérdek rendelkezésre álló és ingyenes távérzékelt adatnak a rendkívül hosszadalmas feldolgozása. Hiszen csak nagy mennyiségű, empirikus adatból lehet szilárd, megbízható tudományos következtetéseket levonni, és megbízható modelleket megalapozni. A Google Earth Engine felhő alapú számítási platform alkalmazásával szeretném demonstrálni az objektum-orientált programozás elengedhetetlen szükségét a geoinformatikában.</strong></p> <p><br /></p> <h2 id="a-google-earth-engine-bemutatása">A Google Earth Engine bemutatása</h2> <center> <iframe width="560" height="315" src="https://www.youtube.com/embed/4E6yQLoGO2o" frameborder="0"></iframe> </center> <p>A <strong>felhő alapú</strong> (cloud computing) <strong>szolgáltatások</strong> közös jellemzője, hogy a szolgáltatásokat nem egy dedikált hardvereszközön üzemeltetik, hanem a szolgáltató eszközein elosztva, a szolgáltatás üzemeltetési részleteit a felhasználótól elrejtve. Ezeket a szolgáltatásokat a felhasználók <strong>a hálózaton keresztül</strong> érhetik el. A <strong>Google Earth Engine</strong> is egy ilyen felhő alapú szolgáltatás. Ez egy olyan szoftverszolgáltatási módszer, amelynél a szoftver és a kapcsolódó adatok központilag vannak tárolva (tipikusan egy (internet) felhőben, esetünkben a Google szerverein), ugyanakkor a felhasználói hozzáférések egy vékony <strong>kliens</strong>en keresztül zajlanak, amely leggyakrabban egy valamilyen <strong>webböngésző alkalmazás</strong>. Esetünkben ez a Google Earth Engine alkalmazásprogramozási felülete vagy interfésze (application programming interface, API). A Google Earth Engine API a JavaScript és a Python programozási nyelveket használja. A Python használatához telepítésre is szükség van. Csak a JavaScript klienssel foglalkozom.</p> <p>A Google Earth Engine (a későbbiekben: GEE) felhő alapú platformját műholdképek és egyéb földi megfigyelési adatok feldolgozására hozták létre. Hozzáférést nyújt a Google képi adattáraihoz (909 terrabájtnyi, azaz majdnem 1 petabájtnyi (10<sup>15</sup> bájt) adat) és biztosítja azt a gigászi számítási teljesítményt, ami a képek feldolgozásához szükséges.</p> <p>A tudomány tekintélyes adat- és technológiai erőforrásokkal való párosítása több <strong>előnnyel</strong> jár:</p> <ol> <li><strong>Példa nélküli sebesség:</strong> még a legerősebb felhasználói számítógépekkel is napokba vagy hetekbe telik egy elemzés lefuttatása a földfelszín bármely nagyobb szegletére. A felhő alapú számítással nagyságrendileg lecsökken a számítási idő.</li> <li><strong>Könnyen használható és alacsony költségű:</strong> egy internetes felület, amely könnyű hozzáférést nyújtva az adatokhoz (Landsat, MODIS, Sentinel stb.), a tudományos algoritmusokhoz és a számítási teljesítményhez. Drámaian lecsökkenti a földrajzi adatok elemzésének költségeit és összetettségét. Ez lehetővé teszi a magas befolyású, adat-vezérelte tudományt.</li> </ol> <p>A GEE számítási módszere figyelemreméltóan hatékony: automatikusan párhuzamosítja az elemzéseket, így aztán számos számítógép CPU-ján egy időben futnak a Google adatközpontokban. A számításokat „lustán” hajtja végre, csak a kijelző megtöltéséhez vagy a kért értékek számításához szükséges bemenő adatokat kéri be. Ez az <strong>éppen időben</strong> (just-in-time) <strong>megosztott számítási modell</strong> lehetővé teszi az eredmények valós idejű felfedezését. A számítás után, az eredményeket gyorsítótárazza a memóriában azért, hogy az ugyanarra a műholdképre vagy értékre vonatkozó többszörös HTTP lekérések ne vezessenek fölösleges újraszámításhoz.</p> <p>A GEE Code Editor fejlesztői környezet felületét a lenti kép mutatja: fent középen a <strong>JavaScript kódszerkesztő</strong>, alul a <strong>térképnézet</strong>, a bal felső ablakban a fülekkel a <strong>szkriptkezelő</strong> (Scripts), az <strong>API dokumentáció</strong> (Docs) és a <strong>saját feltöltött adataink</strong> (Assets) érhetők el. A jobb felső ablakban a <strong>felügyelő</strong> (Inspector) – pl. a térképre kattintva egy pont földrajzi koordinátáit írja ki –, a <strong>konzol</strong> (Console) – a <code class="highlighter-rouge">print()</code> függvény ide ír –, és a <strong>feladatok</strong> (Tasks) – pl. egy műholdkép GeoTIFF-be exportálása – jeleníthető meg a fülekre kattintva. A kódszerkesztő ablak fejlécében a <strong>Get Link</strong> gombra kattintva megkapjuk a szkriptünkre mutató egyedi html címet.</p> <center> <img src="http://localhost:4000/assets/gee-800px-min.jpg" class="large" alt="Google Earth Engine kódszerkesztő" /> <figcaption>1. kép: A Google Earth Engine kódszerkesztője </figcaption> </center> <h3 id="fontos-tudnivalók">Fontos tudnivalók</h3> <p>A GEE nem kereskedelmi célra ingyenesen elérhető, viszont a használata az <strong>Earth Engine Kiértékelők</strong> (Earth Engine Evaluators) számára korlátozott.</p> <ol> <li>A Google Earth Engine használatához <a href="https://accounts.google.com/SignUp?hl=hu" target="_blank">Google Fiók</a>kal kell rendelkezni. </li> <li>Egy űrlapot kell kitölteni <a href="https://signup.earthengine.google.com/" target="_blank">itt</a>. Kb. 1 hét alatt bírálják el, és adnak hozzáférést a platformhoz. </li> </ol> <p>Csak ez a két lépés után tudod használni a Google Earth Engine-t.</p> <p>A továbbiakban dióhéjban bemutatom a GEE működését. Az <strong>objektum-orientált programozás</strong> és a <strong>JavaScript</strong> nyelv rövid bemutatását egy későbbi blogbejegyzésben pótolom.</p> <p><br /></p> <h2 id="hogyan-működik-a-google-earth-engine">Hogyan működik a Google Earth Engine?</h2> <h3 id="1-kliens-kontra-szerver">1. Kliens kontra szerver</h3> <p>Fontos megkülönböztetni az <strong>EE objektumokat</strong> más JavaScript objektumoktól vagy elemi grafikus objektumoktól (ún. primitívek), amelyek a kódban lehetnek. A szerveren található objektumokat <strong>kliens oldali „proxy” objektumok</strong> (tárolók) manipulálásával lehet változtatni. A webböngészőt hívjuk kliensnek: esetünkben ez a Google Earth Engine API. <strong>Minden „ee”-vel kezdődő „valami” egy proxy objektum.</strong> Ezek nem tartalmaznak semmilyen tényleges adatot, mert ezek csupán a szerveren található objektumok kezelői.</p> <p>A következő példában a kliensSztring sztring típusú változót becsomagoljuk egy tárolóba (az <code class="highlighter-rouge">ee.Date()</code> konstruktorát hívjuk meg). Ezeket a tárolókat küldjük el a szervernek feldolgozásra!</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">kliensSztring</span> <span class="o">=</span> <span class="s2">"2017-04-01"</span><span class="p">;</span>
<span class="nx">print</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">kliensSztring</span><span class="p">);</span> <span class="c1">//=&gt; sztring</span>
<span class="c1">// Az ee.Date() konstruktorát meghívjuk.</span>
<span class="kd">var</span> <span class="nx">szerverSztring</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nb">Date</span><span class="p">(</span><span class="nx">kliensSztring</span><span class="p">);</span>
<span class="nx">print</span><span class="p">(</span>
    <span class="s2">"Ez egy EE objektum?"</span><span class="p">,</span>
    <span class="p">(</span><span class="nx">szerverSztring</span> <span class="k">instanceof</span> <span class="nx">ee</span><span class="p">.</span><span class="nx">ComputedObject</span><span class="p">)</span>
<span class="p">);</span> <span class="c1">//=&gt; igaz</span></code></pre></figure> <p>A dátum objektumok segítségével könnyedén le tudjuk válogatni a megadott időszakban készült műholdképeket a képkollekcióból (<code class="highlighter-rouge">ee.ImageCollection</code> osztály).</p> <p>A szerver oldali objektumok és metódusok (tagfüggvények) szintaxisa <code class="highlighter-rouge">ee.Thing</code>, illetve <code class="highlighter-rouge">ee.Thing.method()</code>. Bármely másik objektum, ami nem „ee”-vel kezdődik az mind kliens oldali. Például a <code class="highlighter-rouge">print()</code>, a <code class="highlighter-rouge">Map</code>, az <code class="highlighter-rouge">Export</code> vagy a <code class="highlighter-rouge">Chart</code>. Mivel a kliens nem tudja, hogy mi található a szerver oldali <code class="highlighter-rouge">ee.Thing</code> objektumokban, így aztán <strong>a rajtuk végzett for ciklusok és feltételes kifejezések (if-else) nem működnek!</strong> Helyette a <strong>szerver oldali</strong> funkciókat kell használni:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Normalizált Differenciált Vegetációindex számítása.</span>
<span class="kd">var</span> <span class="nx">addNDVIBand</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
    <span class="s2">"use strict"</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">image</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">image</span><span class="p">.</span><span class="nx">addBands</span><span class="p">(</span>
            <span class="nx">image</span><span class="p">.</span><span class="nx">normalizedDifference</span><span class="p">([</span><span class="s2">"B5"</span><span class="p">,</span> <span class="s2">"B4"</span><span class="p">])</span>
                <span class="p">.</span><span class="nx">rename</span><span class="p">(</span><span class="s2">"NDVI"</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">};</span>
<span class="p">};</span>

<span class="cm">/* Landsat 8 kollekció szűrése, NDVI számítása az
 * összes képre a map() metódussal. */</span>
<span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nx">Geometry</span><span class="p">.</span><span class="nx">Point</span><span class="p">(</span><span class="mf">19.064</span><span class="p">,</span> <span class="mf">47.547</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">landsat</span> <span class="o">=</span> <span class="s2">"LANDSAT/LC8_L1T_TOA_FMASK"</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">filteredCollection</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nx">ImageCollection</span><span class="p">(</span><span class="nx">landsat</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">filterBounds</span><span class="p">(</span><span class="nx">point</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="s2">"2016-08-01"</span><span class="p">,</span> <span class="s2">"2016-08-31"</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">addNDVIBand</span><span class="p">(</span><span class="nx">landsat</span><span class="p">))</span>
    <span class="c1">// Növekvő sorrend a %-os felhőborítás alapján.</span>
    <span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="s2">"CLOUD_COVER"</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span></code></pre></figure> <p><br /></p> <h3 id="2-késleltetett-végrehajtás">2. Késleltetett végrehajtás</h3> <p>Ha egy szkriptet írunk, akkor a kód nem közvetlenül fut le az EE szerverein. Ehelyett, a kliens könyvtár (GEE API) átkódolja a szkriptet <strong>JSON objektumok</strong> sorozatává, majd ezeket elküldi a Google-nek, és válaszra vár. Semmi sem lesz elküldve a Google számára feldolgozásra, ha explicite nem adunk rá utasítást. Tehát fölöslegesen nem dolgoz fel semmit a szerver, ha nem utasítjuk rá. A <code class="highlighter-rouge">print()</code> vagy a <code class="highlighter-rouge">Map.addLayer()</code> utasítás már elegendő a kérés elküldéséhez:</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Az első kép leválogatása (a legkevesebb felhő).</span>
<span class="kd">var</span> <span class="nx">first</span> <span class="o">=</span> <span class="nx">filteredCollection</span><span class="p">.</span><span class="nx">first</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">landsatImage</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nx">Image</span><span class="p">(</span><span class="nx">first</span><span class="p">);</span>

<span class="c1">// A kép tulajdonságainak kiírása a konzolra.</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">landsatImage</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">studyArea</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nx">Geometry</span><span class="p">.</span><span class="nx">Rectangle</span><span class="p">(</span>
    <span class="mf">19.1223</span><span class="p">,</span>
    <span class="mf">46.7513</span><span class="p">,</span>
    <span class="mf">19.2341</span><span class="p">,</span>
    <span class="mf">46.8884</span>
<span class="p">);</span>

<span class="c1">// Megjelenítési paraméterek beállítása.</span>
<span class="kd">var</span> <span class="nx">vizParams</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">bands</span><span class="p">:</span> <span class="p">[</span><span class="s2">"B5"</span><span class="p">,</span> <span class="s2">"B4"</span><span class="p">,</span> <span class="s2">"B3"</span><span class="p">],</span>
    <span class="na">min</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="na">max</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span>
    <span class="na">gamma</span><span class="p">:</span> <span class="mf">1.3</span>
<span class="p">};</span>

<span class="c1">// A 11. piramisszinthez tartozó felbontás 76 méter!</span>
<span class="nx">Map</span><span class="p">.</span><span class="nx">setCenter</span><span class="p">(</span><span class="mf">19.17826</span><span class="p">,</span> <span class="mf">46.81987</span><span class="p">,</span> <span class="mi">11</span><span class="p">);</span>

<span class="c1">// Megjelenítés a térképnézeten.</span>
<span class="nx">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">studyArea</span><span class="p">);</span>
<span class="nx">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span>
    <span class="nx">landsatImage</span><span class="p">.</span><span class="nx">clip</span><span class="p">(</span><span class="nx">studyArea</span><span class="p">),</span>
    <span class="nx">vizParams</span><span class="p">,</span>
    <span class="s2">"Landsat 8 hamis színes kompozit"</span>
<span class="p">);</span></code></pre></figure> <p><br /></p> <h3 id="3-a-lépték-és-a-vetületek-kezelése">3. A lépték és a vetületek kezelése</h3> <p>Fontos tudnivaló, hogy a <code class="highlighter-rouge">Map.addLayer()</code> segítségével a térképen kirajzolt kép eltérő bemenetekből készül a nagyítási szint és a térképnézet határaitól függően. A lépték a GEE-ben <strong>pixelméretet</strong> jelent. A GEE az elemzés / a bemenő adat léptékét a kimenetből határozza meg, amit nekünk meg kell adnunk. A GEE ugyanis <strong>képpiramisokat</strong> használ, ahol minden egyes cella értéke egy adott piramisszinten az alatta levő szint 2x2-es blokkjának, azaz 4 cellájának az átlagértéke. Az aggregálás egy 256x256 cella felbontású képszelvényig történik. A GEE azt a piramisszintet választja, ami <strong>legközelebb esik az általunk megadott léptékhez</strong> (kisebb vagy egyenlő annál), és abból számol.</p> <center> <img src="http://localhost:4000/assets/keppiramisok.png" class="image2" alt="GEE képpiramisok" /> <figcaption>2. kép: Google Earth Engine képpiramisok </figcaption> <figcaption>1. táblázat: Pixelméretek a különböző nagyítási szinteknél (0-20) a Google Mercator vetülete esetén (EPSG:3857). Ha Magyarországra akarunk vonatkoztatni, akkor a földrajzi szélesség koszinuszával be kell szorozni az értékeket. Például a 12-es nagyítási szintnél: 38·cos(47°) = 25,6 m. </figcaption> <table> <tr> <th width="40%">Nagyítási szint </th> <th width="60%">Pixelméret az Egyenlítőnél </th> </tr> <tr> <td>11</td> <td>76 m</td> </tr> <tr> <td>12</td> <td>38 m</td> </tr> <tr> <td>13</td> <td>19 m</td> </tr> <tr> <td>14</td> <td>9,6 m</td> </tr> <tr> <td>15</td> <td>4,8 m</td> </tr> <tr> <td>16</td> <td>2,4 m</td> </tr> </table> </center> <p>A Google a térképek megjelenítéséhez a <strong>Mercator vetületet</strong> használja (WGS 84 / Pseudo-Mercator, EPSG:3857), így aztán a képpiramis megfelelő szintjén, a megjelenítést megelőzően, vetületi transzformációra kerül sor (röptében). Ha lehetséges, akkor célszerű elkerülni az egyéb vetületi transzformációkat. Meg kell hagyni az adatokat eredeti vetületükben! Az EOV nem támogatott. Ne is próbáld használni, mert rossz lesz az eredmény!</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Az első sáv kiválasztása; vetület, lépték kiírása.</span>
<span class="kd">var</span> <span class="nx">myImage</span> <span class="o">=</span> <span class="nx">landsatImage</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="nx">print</span><span class="p">(</span>
    <span class="s2">"Vetület, crs, és crs_transform:"</span><span class="p">,</span>
    <span class="nx">myImage</span><span class="p">.</span><span class="nx">projection</span><span class="p">()</span>
<span class="p">);</span>
<span class="nx">print</span><span class="p">(</span>
    <span class="s2">"Felbontás méterben:"</span><span class="p">,</span>
    <span class="nx">myImage</span><span class="p">.</span><span class="nx">projection</span><span class="p">().</span><span class="nx">nominalScale</span><span class="p">()</span>
<span class="p">);</span></code></pre></figure> <p><br /></p> <h3 id="4-inputoutput-műveletek">4. Input/output műveletek</h3> <p>Több lehetőség áll rendelkezésünkre az exportálásra: az adatainkat <strong>GeoTIFF-be/HD videóba</strong> menthetjük a <strong>Google Drive</strong>-ra, a Google felhő-alapú tárolóegységre (<strong>Google Cloud Storage</strong>) vagy az <strong>Assets</strong> mappánkba. Ez utóbbi helyre a saját GeoTIFF raszterállományainkat is feltölthetünk. A vektoros adatokat <strong>KML formátumban</strong> ajánlott feltölteni, amiből <strong>Fusion Table</strong> készül, amit betölthetünk a szkriptünkbe az azonosítója segítségével. A készített idősorok adatai is lementhetők CSV-be (pontosvesszővel tagolt értékek).</p> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/* Mindig adjuk meg az eredeti felbontást!
 * A kép eredeti vetületébe (WGS 84 / UTM) menti. */</span>
<span class="nx">Export</span><span class="p">.</span><span class="nx">image</span><span class="p">.</span><span class="nx">toDrive</span><span class="p">({</span>
    <span class="na">image</span><span class="p">:</span> <span class="nx">landsatImage</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">"NDVI"</span><span class="p">),</span>
    <span class="na">description</span><span class="p">:</span> <span class="s2">"NDVI_image"</span><span class="p">,</span>
    <span class="na">scale</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="na">region</span><span class="p">:</span> <span class="nx">studyArea</span>
<span class="p">});</span></code></pre></figure> <p>Próbáljátok ki a szkriptet a <a href="https://code.earthengine.google.com/" target="_blank">Google Earth Engine Code Editor</a>ban! A teljes kódot töltsd le az <a href="https://github.com/SalsaBoy990/EarthEngine/blob/master/tutorial1.js" target="_blank">Earth Engine</a> gyűjteményemből!</p> <p>A Google Earth Engine-nek nem csak alkalmazásprogramozási felülete (API) van, hanem rendelkezésre áll a <a href="https://explorer.earthengine.google.com" target="_blank">Google Earth Engine Explorer</a>, ami egy grafikus felhasználói felület (graphical user interface, GUI), ahol programozási ismeretek nélkül is hozzáférhetünk az adatokhoz. Természetesen sokkal korlátozottabb funkcionalitással bír, mint a kódszerkesztő. Ennek a használata is regisztrációhoz kötött és szintén ingyenes nem kereskedelmi célokra.</p> <p><br /></p> <h2 id="felhasznált-irodalom">Felhasznált irodalom</h2> <ul class="no-decoration-16px"> <li>Google Earth Engine Team (2015). <a href="https://earthengine.google.com" target="_blank">Google Earth Engine: A planetary-scale geospatial analysis platform.</a> </li> <li><a href="https://developers.google.com/earth-engine/" target="_blank">Google Earth Engine API kézikönyv.</a> </li> <li><a href="https://code.earthengine.google.com/" target="_blank">Google Earth Engine Code Editor.</a></li> <li><a href="https://explorer.earthengine.google.com" target="_blank">Google Earth Engine Explorer.</a></li> <li>Egy Earth Engine Kiértékelő felhasználói fiókért egy elektronikus űrlap kitöltésével <a href="https://signup.earthengine.google.com/" target="_blank">itt</a> lehet jelentkezni. </li> <li>További JavaScript kódok a <a href="https://github.com/SalsaBoy990/EarthEngine" target="_blank">GitHub</a> gyűjteményemből érhetők el. </li> </ul> </div> </article> <div id="disqus_thread"></div> <script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/ var disqus_config = function () { this.page.url = "http://localhost:4000/tudomany/2017/08/07/google_earth_engine_01.html"; this.page.identifier = "/tudomany/2017/08/07/google_earth_engine_01"; }; (function() { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = 'https://newgeographer.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script> <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> </div> </div> <center> <div id="back-to-top" class="gomb">Vissza fel</div> </center> <br /> <footer class="site-footer"> <div class="wrapper"> <div class="footer-col-wrapper"> <div class="footer-col footer-col-1"> <h2 class="footer-heading">Gulácsi András</h2> <p>A New Geographer – Új Geográfus blog egy újszerű szemléletben egyesíti a földrajzot az informatikával és a webfejlesztéssel. A blogomon az esszéimet és a tudományos ismeretterjesztő írásaimat publikálom számos, egymástól távol álló témában a földi életről. <p class="copyright">&copy; Gulácsi András 2017.</a></p> </p> </div> <div class="footer-col footer-col-2"> <ul class="social-media-list"> <li> <a href="https://github.com/SalsaBoy990" target="_blank"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg> </span><span class="username">SalsaBoy990</span></a> </li> <li> <a href="https://twitter.com/@UjGeografus" target="_blank"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg> </span><span class="username">@UjGeografus</span></a> </li> <li> <a href="https://www.facebook.com/andras.gulacsi.3" target="_blank"><span class="icon icon--facebook"><svg viewBox="0 0 512 512"><path fill="#828282" d="M211.9 197.4h-36.7v59.9h36.7V433.1h70.5V256.5h49.2l5.2-59.1h-54.4c0 0 0-22.1 0-33.7 0-13.9 2.8-19.5 16.3-19.5 10.9 0 38.2 0 38.2 0V82.9c0 0-40.2 0-48.8 0 -52.5 0-76.1 23.1-76.1 67.3C211.9 188.8 211.9 197.4 211.9 197.4z"/></svg></span><span class="username"> Facebook</span></a> </li> <li> <a href="mailto:guland@protonmail.com" target="_blank"><span class="icon icon--email"><?xml version="1.0" ?><!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'><svg height="32px" id="Layer_1" style="enable-background:new 0 0 32 32;" version="1.1" viewBox="0 0 32 32" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(288 240)"><path d="M-288-236v24h32v-24H-288z M-272-223.316l-12.464-10.685h24.929L-272-223.316z M-272-220.684l3.899-3.342l8.771,10.023 h-25.343l8.771-10.023l3.897,3.342H-272z M-258-215.518l-8.582-9.811l8.582-7.355V-215.518z M-277.418-225.328l-8.582,9.81v-17.164 L-277.418-225.328z"/></g></svg></span><span class="username"> E-mail</span></a> </li> </ul> </div> </div> </footer> <!-- jQuery here --> <script src="http://localhost:4000/js/jquery.min.js"></script> <script type="text/javascript"> $(document).ready(function () { $("#back-to-top").on("click", function() { $("html,body").animate({ scrollTop: 0 }, 50); /*$(window).scrollTop(0);*/ }); $("#intro").click(function() { var temp = $("#about-block"); temp.css("margin-bottom", "40px"); temp.slideToggle(300); $("html,body").animate({ scrollTop: 0 }, 300); /*$(window).scrollTop(0);*/ }); $("#close").click(function() { $("#about-block").slideToggle(300); $("html,body").animate({ scrollTop: 0 }, 300); /*$(window).scrollTop(0);*/ }); $("#toggle-book-contents").on("click", function() { var temp = $("#book-contents"); temp.css("border", "1px solid #828282"); temp.css("border-radius", "7px"); temp.slideToggle(200); }); $('table tr:even').addClass('color'); $("table tr").filter(":first").css("font-weight", "600"); }); </script> </body> </html>
